% beamerthememedievalnlp.sty — Custom Beamer theme for UNISTRA NLP 2026 Lecture
% Warm cream palette — projector-friendly with coral/gold accents
% Compile with: pdflatex (default) or lualatex/xelatex

\ProvidesPackage{beamerthememedievalnlp}

% ── Packages ──
\RequirePackage{tikz}
\usetikzlibrary{shapes,arrows.meta,positioning,calc,decorations.pathreplacing,backgrounds}
\RequirePackage{xcolor}
\RequirePackage{booktabs}
\RequirePackage{tabularx}
\RequirePackage{fontenc}
\RequirePackage{sourcesanspro}
\RequirePackage{sourcecodepro}
\RequirePackage{mathpazo}  % Palatino for math + serif fallback

% ── Colors (light projector-friendly palette) ──
\definecolor{bglight}{HTML}{F5EFE6}      % warm cream background
\definecolor{bgcard}{HTML}{EDE8E0}       % slightly darker for cards/blocks
\definecolor{bgaccent}{HTML}{E5DDD3}     % block backgrounds
\definecolor{textdark}{HTML}{2C2421}     % primary text (warm dark brown)
\definecolor{textsecond}{HTML}{4A4340}   % secondary text
\definecolor{textmuted}{HTML}{8A7B70}    % muted annotations
\definecolor{coral}{HTML}{E07850}        % primary accent
\definecolor{corallight}{HTML}{F0A080}   % lighter accent
\definecolor{coraldark}{HTML}{C05830}    % darker accent
\definecolor{gold}{HTML}{D4A855}         % secondary accent
\definecolor{golddark}{HTML}{B08A3A}     % darker gold
\definecolor{green}{HTML}{5A8A5A}        % for positive/human data
\definecolor{blue}{HTML}{5B8DB8}         % occasional use

% ── Base Settings ──
\setbeamercolor{background canvas}{bg=bglight}
\setbeamercolor{normal text}{fg=textdark}
\setbeamercolor{title}{fg=textdark}
\setbeamercolor{subtitle}{fg=textmuted}
\setbeamercolor{author}{fg=textsecond}
\setbeamercolor{date}{fg=textmuted}
\setbeamercolor{institute}{fg=textmuted}
\setbeamercolor{frametitle}{fg=textdark}
\setbeamercolor{framesubtitle}{fg=coral}
\setbeamercolor{structure}{fg=coral}
\setbeamercolor{section in toc}{fg=textdark}
\setbeamercolor{subsection in toc}{fg=textmuted}
\setbeamercolor{item}{fg=coral}
\setbeamercolor{subitem}{fg=coraldark}
\setbeamercolor{subsubitem}{fg=textmuted}
\setbeamercolor{block title}{fg=textdark,bg=bgcard}
\setbeamercolor{block body}{fg=textsecond,bg=bgaccent}
\setbeamercolor{block title alerted}{fg=white,bg=coral}
\setbeamercolor{block body alerted}{fg=textdark,bg=bgcard}
\setbeamercolor{block title example}{fg=textdark,bg=bgcard}
\setbeamercolor{block body example}{fg=textsecond,bg=bgaccent}
\setbeamercolor{alerted text}{fg=coral}
\setbeamercolor{footnote}{fg=textmuted}
\setbeamercolor{caption name}{fg=coral}

% ── Fonts ──
\setbeamerfont{title}{size=\Huge,series=\bfseries}
\setbeamerfont{subtitle}{size=\large}
\setbeamerfont{frametitle}{size=\Large,series=\bfseries}
\setbeamerfont{framesubtitle}{size=\normalsize}
\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{section title}{size=\Huge,series=\bfseries}

% ── Inner Theme ──
\setbeamertemplate{itemize item}{\color{coral}\raisebox{0.2ex}{\rule{0.6ex}{0.6ex}}}
\setbeamertemplate{itemize subitem}{\color{coraldark}\raisebox{0.2ex}{\rule{0.5ex}{0.5ex}}}
\setbeamertemplate{itemize subsubitem}{\color{textmuted}\raisebox{0.2ex}{\rule{0.4ex}{0.4ex}}}
\setbeamertemplate{enumerate item}{\color{coral}\insertenumlabel.}
\setbeamertemplate{navigation symbols}{}

% ── Footline with slide number ──
\setbeamertemplate{footline}{%
  \hfill%
  \raisebox{3pt}[0pt][0pt]{%
    \color{textmuted}\footnotesize\insertframenumber\,/\,\inserttotalframenumber%
    \hspace{8pt}%
  }%
  \vspace{3pt}%
}

% ── Frame Title ──
\setbeamertemplate{frametitle}{%
  \vspace{0.5cm}%
  \noindent\insertframetitle%
  \par%
  \ifx\insertframesubtitle\empty\else%
    \vspace{0.1cm}%
    {\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}%
  \fi%
  \vspace{0.2cm}%
  \noindent\textcolor{coral}{\rule{2cm}{1.5pt}}%
  \vspace{0.2cm}%
}

% ── Title Page ──
\setbeamertemplate{title page}{%
  \vspace{1.2cm}%
  \begin{flushleft}%
    {\usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle}\\[0.3cm]%
    {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle}\\[0.8cm]%
    \textcolor{coral}{\rule{3cm}{2pt}}\\[0.6cm]%
    {\usebeamercolor[fg]{author}\insertauthor}\\[0.15cm]%
    {\usebeamercolor[fg]{institute}\insertinstitute}\\[0.15cm]%
    {\usebeamercolor[fg]{date}\insertdate}%
  \end{flushleft}%
}

% ── Section Page ──
\AtBeginSection[]{%
  \begin{frame}[plain,noframenumbering]
    \vfill
    \begin{center}
      {\Large\color{textmuted}\insertsectionnumber}\\[0.3cm]
      {\Huge\color{textdark}\bfseries\insertsectionhead}\\[0.5cm]
      \textcolor{coral}{\rule{3cm}{2pt}}
    \end{center}
    \vfill
  \end{frame}
}

% ── Useful Commands ──
\newcommand{\highlight}[1]{\textcolor{coral}{#1}}
\newcommand{\gold}[1]{\textcolor{gold}{#1}}
\newcommand{\muted}[1]{\textcolor{textmuted}{#1}}
\newcommand{\green}[1]{\textcolor{green}{#1}}

% Citation command (muted, small)
\newcommand{\cmark}[1]{\hfill{\tiny\color{textmuted}#1}}
\newcommand{\citeslide}[1]{{\tiny\color{textmuted}#1}}

% Full-width coral rule
\newcommand{\coralrule}{\textcolor{coral}{\rule{\textwidth}{1pt}}}

% Quote environment for lecture
\newenvironment{lectquote}{%
  \begin{center}\begin{minipage}{0.85\textwidth}%
  \color{textsecond}\itshape\large``%
}{%
  ''\end{minipage}\end{center}%
}

% Stat card (for hero-style numbers)
\newcommand{\statcard}[2]{%
  \begin{tikzpicture}
    \node[rectangle, fill=bgcard, minimum width=2.5cm, minimum height=1.5cm, rounded corners=2pt] {%
      \begin{tabular}{c}
        {\Large\color{coral}\bfseries #1}\\[0.1cm]
        {\footnotesize\color{textmuted}#2}
      \end{tabular}
    };
  \end{tikzpicture}%
}
